//#define SIMU

proto main 0;;
var NOMINAL;;

#include lib/std/utils.mtl
#include lib/std/debug.mtl
#include lib/const/config.mtl

#ifdef SIMU
var SIMU;;
#include lib/net/simu.mtl
#include lib/net/dhcp.mtl
#include lib/net/dns.mtl
#endif

#ifndef SIMU
#include lib/net/arp.mtl
#include lib/net/ip.mtl
#include lib/net/tcp.mtl
#include lib/net/udp.mtl
#include lib/net/dhcp.mtl
#include lib/net/net.mtl
#include lib/net/dns.mtl
#endif

#include lib/const/led.mtl
#include server.mtl

fun loop=
    Secholn "test";
    0;;

fun main=
    Secholn "starting";
    confInit;
    netstart;
    startdnsclient;
    startsocketserver 5000;
    //loopcb #loop;
    Secholn "hello world ------------";
    0;;
